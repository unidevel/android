<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../css/jquery.mobile-1.4.2.css" />
<script src="../js/jquery.js"></script>
<script src="../js/jquery.mobile-1.4.2.js"></script>
<style>
.hide 
{
	display:none !important
}
</style>
</head>
<body>

	<div data-role="page">
		<script>
			var voteData = {title: "", votes:[]};
			function addNewOption(vote){
				alert("new Option");
			}
			function editVoteTitle(obj){
				alert("Edit");
			}
			function enterTitleEdit(){
				$("#overall_title_edit").removeClass("hide");
				$("#overall_title").addClass("hide");
				$("#overall_title_edit").val(voteData.title);
				$("#overall_title_edit").focus();
			}
			function leaveTitleEdit(){
				voteData.title = $("#overall_title_edit").val();
				$("#overall_title").removeClass("hide");
				$("#overall_title").html(voteData.title);
				$("#overall_title_edit").addClass("hide");
			}
			function addNewVote(multi) {
				var vote = {title: "", type:multi?"checkbox":"radio", options:{}};
				voteData.votes.push(vote);
				var template = $("#vote_template").html();
				var dom = $(template);
				dom.uniqueId();
				dom.appendTo("#vote_content");
				vote.domId = dom.attr("id");
				$(dom).find("[name='new_option']").on("click", function(event){
					addNewOption(vote);
				});
			};
			$(document).on("pageshow", function(event) {
				alert("bind");
				$("[name='new_single']").on("click", function(event) {
					addNewVote(false);
				});
				$("[name='new_multi']").on("click", function(event) {
					addNewVote(true);
				});
			});
		</script>


		<div data-role="header" data-theme="b">
			<a href="index.html" data-icon="delete">Cancel</a>
			<h1>New vote</h1>
			<a href="index.html" data-icon="check" data-theme="b">Save</a>
		</div>
		<!-- /header -->

		<div data-role="content" id="vote_content">
			<h2 id="overall_title" onclick="enterTitleEdit()">Test vote for test purpose</h2>
			<textarea name="title" id="overall_title_edit" placeholder="Overall title" class="hide" onblur="leaveTitleEdit()"></textarea>
			<hr />
			<div id="vote_template" style="display: none">
				<h3 name="vote_title" onclick="editVoteTitle(this)">1. Vote one</h3>
				<!--input type="text" name="title" value="" data-inline="true" placeholder="Title"/-->
				<div name="vote_options" data-role="controlgroup">
					<button class="ui-shadow ui-btn ui-corner-all" name="new_option">Add new option</button>
				</div>
				<hr />
				<!--/div-->
			</div>
			<div data-role="controlgroup" data-type="horizontal" data-mini="true">
				<button name="new_single" class="ui-shadow ui-btn ui-corner-all">New
					single-choice vote</button>
				<button name="new_multi" class="ui-shadow ui-btn ui-corner-all">New
					multi-choice vote</button>
			</div>

		</div>
		<!-- /content -->

		<!--div data-role="footer" class="footer-docs" data-theme="c">
			<p class="jqm-version"></p>
			<p>Copyright 2010, 2013 jQuery Foundation, Inc. and other
				contributors</p>
		</div-->

	</div>
	<!-- /page -->

</body>
</html>
